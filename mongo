# 使用官方 MongoDB 镜像，标签为 7.0.5-jammy
FROM mongo:7.0.5-jammy

# 设置环境变量
ENV MONGO_INITDB_ROOT_USERNAME=horde
ENV MONGO_INITDB_ROOT_PASSWORD=dbPass123

# 健康检查
HEALTHCHECK --interval=30s --timeout=30s --start-period=10s --retries=3 \
  CMD mongo --eval 'db.stats()' || exit 1

# 映射容器的 27017 端口到宿主机的 27017 端口，以便外部可以连接 MongoDB
EXPOSE 27017

# 创建一个数据卷，用于持久化 MongoDB 数据
VOLUME /data/db

# 禁用 MongoDB 的日志输出，将日志写入标准输出
CMD ["mongod", "--quiet"]
